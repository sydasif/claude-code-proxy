services:
  qwen-proxy:
    build: .
    container_name: qwen-proxy
    ports:
      - "3455:3455"
    volumes:
      # 1. Mount config
      - ./config.yaml:/app/config.yaml

      # 2. Mount the entire Qwen folder to /app/secrets (Safer than file mounting)
      # Use $HOME environment variable for better compatibility
      - ${HOME}/.qwen:/app/secrets:ro

    # 3. Environment variable to tell Python where to look
    environment:
      - QWEN_CREDS_PATH=/app/secrets/oauth_creds.json

    restart: unless-stopped